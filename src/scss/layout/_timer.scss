@use "../abstracts" as *;

.timer {
  $timer-padding-inline: 1rem;
  box-shadow: 0 5px 2px 1px #777;
  width: 100%;

  &__top {
    position: relative;
    padding: 1.5rem 1rem 2.25rem;
    border-radius: $radius-sm $radius-sm 0 0;
    background-color: $white-base;
  }

  &__screen-outer {
    border: 2px solid map-get($components-color, "screen-outer");
    box-shadow: inset 0 0 0 1px white;
    padding: 1.875rem;
    background-color: map-get($components-color, "screen-outer");
  }

  &__screen-inner {
    @include flex($ai: center);
    padding: 16px 28px;
    min-height: 120px;
    font-family: $primary-font;
    text-align: center;
    font-size: map-get($font-size, time-default);
    border: 3px solid;
    color: map-get($map: $components-color, $key: "screen-dark");
    background-color: map-get($components-color, "screen-base");
  }

  &__time-left {
    text-align: left;
    font-size: 1.3rem;
  }

  &__time-wrapper {
    &--times-up {
      font-size: map-get($font-size, times-up);
      text-align: center;
    }
  }

  .vents {
    @include flex($jc: space-between);
    position: absolute;
    left: 0;
    bottom: 0%;
    transform: translateY(50%);
    width: 100%;
  }

  .vent {
    width: 1rem;

    &__hole {
      width: 100%;
      height: 0.125rem;
      background-color: map-get($map: $components-color, $key: "vents");
    }

    &__hole:not(:first-child) {
      margin-top: 0.125rem;
    }
  }

  &__middle {
    padding: 2rem $timer-padding-inline 1.75rem;
    background-color: map-get($map: $components-color, $key: "timer-middle");
  }

  .btn-icons {
    @include flex($jc: space-around);
  }

  .btn-icon {
    font-size: 0.875rem;
    color: $orange-base;
  }

  &__bottom {
    @include flex($jc: flex-end, $ai: center);
    padding: 1.55rem 1.6rem 1rem;
    border-radius: $radius-sm;
    background-color: map-get($map: $components-color, $key: "timer-bottom");
  }

  .pilot-lamp {
    @extend %flex-center;
  }

  .pilot-lamp__text {
    font-size: 0.875rem;
    letter-spacing: 0.2em;
    color: $white-dark;
    font-family: "Saira Semi Condensed", sans-serif;
    transform: scaleY(0.65);
  }

  .pilot-lamp__light {
    width: 0.625rem;
    height: 0.625rem;
    border:1px solid black;
    border-top-width: 1.5px;
    margin-left: 0.75rem;
    background-color: map-get($map: $components-color, $key: light-stop);
    box-shadow: 0 -1px 0 0 black;

    // 測試用
    // animation: flickering-light 1000ms infinite linear;
  }

  .ploit-lamp__light--orange {
    background-color: map-get($components-color, "light-pause");
    box-shadow:0 0px 15px 5px map-get($components-color, "light-pause");
    border: 1px solid red;
  }

  .pilot-lamp__light-animation {
    animation: flickering-light 1000ms infinite linear;
  }
}

@keyframes flickering-light {
  80% {
    box-shadow: 0 -1px 0 0 black;
    background-color: map-get($map: $components-color, $key: light-stop);
  }

  85% {
    box-shadow: 0 0 30px 10px map-get($map: $components-color, $key: light-start);
    background-color: map-get($map: $components-color, $key: light-start);
  }

  95% {
    background-color: rgb(234, 234, 234);
  }

  100% {
    box-shadow: 0 0 30px 10px map-get($map: $components-color, $key: light-start);
    background-color: map-get($map: $components-color, $key: light-start);
  }
}